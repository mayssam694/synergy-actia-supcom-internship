[agent]
  interval = "5s"
  flush_interval = "10s"
  debug = true

[[inputs.mqtt_consumer]]
  servers = ["tcp://host.docker.internal:1883"] # même broker que Python
  topics  = ["nilm/predictions/#"]               
  qos = 0

  name_override     = "nilm_points"
  data_format       = "json"
  json_time_key     = "datetime"
  json_time_format  = "2006-01-02T15:04:05.999999Z"  # "…Z" sans offset
  tag_keys          = ["appliance"]
  topic_tag         = "topic"

[[processors.printer]]  # utile pour debug; retire-le en prod

[[outputs.influxdb_v2]]
  urls         = ["http://influxdb:8086"]
  token        = "NPjl2rSY9--15FUNsauMeJRfjbQgjauhwsWefDaZO81763Vg3bUpjIsUZlTG2zxgYHK4d5O60C8ZYjg5ekomOA=="  # ton token
  organization = "Mayssam-Workspace"
  bucket       = "telemetry"

[[outputs.file]]
  files = ["stdout"]
  data_format = "influx"
